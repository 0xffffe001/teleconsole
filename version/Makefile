BUILDDATE=$(shell date +%F)
GITREF=$(shell git describe --always --tags --dirty --long)

# $(VERSION_GO) will be written to version.go
VERSION_GO="/* DO NOT EDIT THIS FILE. IT IS GENERATED BY 'make setver'*/\n\
package version\n\
const( Version = \"$(VERSION)\"\nBuildDate= \"$(BUILDDATE)\"\nGitref = \"$(GITREF)\")\n"


#
# setver updates version.go and gitref.go with VERSION and GITREF vars
#
.PHONY:setver
setver:
	@printf $(VERSION_GO) | gofmt > version.go
